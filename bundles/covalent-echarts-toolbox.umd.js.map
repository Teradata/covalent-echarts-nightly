{"version":3,"file":"covalent-echarts-toolbox.umd.js","sources":["../../../../src/platform/echarts/toolbox/toolbox.component.ts","../../../../src/platform/echarts/toolbox/toolbox.module.ts"],"sourcesContent":["import {\n  Component,\n  Input,\n  Directive,\n  TemplateRef,\n  ChangeDetectionStrategy,\n  ElementRef,\n  ChangeDetectorRef,\n  OnChanges,\n  ContentChild,\n  ViewChild,\n  OnDestroy,\n} from '@angular/core';\n\nimport {\n  TdChartOptionsService,\n  assignDefined,\n  ITdLabel,\n  ITdShadow,\n  ITdItemStyle,\n  TdTextPosition,\n  TdTextAlign,\n} from '@covalent/echarts/base';\n\nexport type TdToolboxOrient = 'horizontal' | 'vertical';\nexport type TdImageType = 'png' | 'jpeg';\n\nexport interface ITdAcceptedBrushTypes {\n  rect?: string;\n  polygon?: string;\n  lineX?: string;\n  lineY?: string;\n  keep?: string;\n  clear?: string;\n}\n\nexport interface ITdAcceptedMagicTypes {\n  line?: string;\n  bar?: string;\n  stack?: string;\n  tiled?: string;\n}\n\nexport interface ITdToolboxIconEmphasis extends ITdItemStyle, ITdShadow {}\n\nexport interface ITdFeatureIconStyle extends ITdItemStyle, ITdShadow {\n  textPosition?: TdTextPosition;\n  textAlign?: TdTextAlign;\n  emphasis?: ITdToolboxIconEmphasis;\n}\n\nexport interface ITdZoomTitles {\n  zoom?: string;\n  back?: string;\n}\n\nexport interface ITdSaveAsImage {\n  type?: TdImageType;\n  name?: string;\n  backgroundColor?: any;\n  excludeComponents?: string[]; // defaults to ['toolbox']\n  show?: boolean;\n  title?: string;\n  icon?: string;\n  iconStyle?: ITdFeatureIconStyle;\n  pixelRatio?: number;\n}\n\nexport interface ITdRestore {\n  show?: boolean;\n  title?: string;\n  icon?: string;\n  iconStyle?: ITdFeatureIconStyle;\n}\n\nexport interface ITdDataView {\n  show?: boolean;\n  title?: string;\n  icon?: string;\n  iconStyle?: ITdFeatureIconStyle;\n  readOnly?: boolean;\n  optionToContent?: Function;\n  contentToOption?: Function;\n  lang?: string[]; // Defaults to Chinese, there are 3 names in data view, which are ['data view', 'turn off' and 'refresh'].\n  textareaColor?: string;\n  textareaBorderColor?: string;\n  textColor?: string;\n  buttonColor?: string;\n  buttonTextColor?: string;\n}\n\nexport interface ITdDataZoom {\n  show?: boolean;\n  title?: ITdZoomTitles;\n  icon?: ITdZoomTitles;\n  iconStyle?: ITdFeatureIconStyle;\n  xAxisIndex?: number | number[] | boolean;\n  yAxisIndex?: number | number[] | boolean;\n}\n\nexport interface ITdMagicType {\n  show?: boolean;\n  type?: string[]; // only expects 'line' | 'bar' | 'stack' | 'tiled';\n  title?: ITdAcceptedMagicTypes;\n  icon?: ITdAcceptedMagicTypes;\n  iconStyle?: ITdFeatureIconStyle;\n  option?: {\n    line?: object;\n    bar?: object;\n    stack?: object;\n    tiled?: object;\n  };\n  seriesIndex?: {\n    line?: any[];\n    bar?: any[];\n    stack?: any[];\n    tiled?: any[];\n  };\n}\n\nexport interface ITdBrush {\n  type?: any[];\n  icon?: ITdAcceptedBrushTypes;\n  title?: ITdAcceptedBrushTypes;\n}\n\nexport interface ITdToolboxFeature {\n  saveAsImage?: ITdSaveAsImage;\n  restore?: ITdRestore;\n  dataView?: ITdDataView;\n  dataZoom?: ITdDataZoom;\n  magicType?: ITdMagicType;\n  brush?: ITdBrush;\n}\n\n@Directive({\n  selector: 'ng-template[tdViewDataFormatter]',\n})\nexport class TdChartViewDataFormatterDirective {}\n\n@Component({\n  selector: 'td-chart-toolbox',\n  templateUrl: './toolbox.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TdChartToolboxComponent implements OnChanges, OnDestroy {\n  private _state: any = {};\n\n  @Input() config: any = {};\n\n  @Input() show: boolean = true;\n  @Input() trigger: string;\n  @Input() orient: TdToolboxOrient;\n  @Input() itemSize: number;\n  @Input() itemGap: number;\n  @Input() showTitle: boolean = true;\n  @Input() label: ITdLabel;\n  @Input() feature: ITdToolboxFeature;\n  @Input() iconStyle: ITdFeatureIconStyle;\n  @Input() zlevel: number;\n  @Input() z: number;\n  @Input() transitionDuration: number = 0.5;\n  @Input() left: string | number = 'auto';\n  @Input() top: string | number = 'auto';\n  @Input() right: string | number = 'auto';\n  @Input() bottom: string | number = 'auto';\n  @Input() width: string | number = 'auto';\n  @Input() height: string | number = 'auto';\n\n  @ContentChild(TdChartViewDataFormatterDirective, { read: TemplateRef })\n  formatterTemplate: TemplateRef<any>;\n  @ViewChild('toolboxContent', { static: true }) fullTemplate: TemplateRef<any>;\n\n  constructor(\n    private _changeDetectorRef: ChangeDetectorRef,\n    private _elementRef: ElementRef,\n    private _optionsService: TdChartOptionsService,\n  ) {}\n\n  ngOnChanges(): void {\n    this._setOptions();\n  }\n\n  ngOnDestroy(): void {\n    this._removeOption();\n  }\n\n  private _setOptions(): void {\n    this._checkFormatterTemplate();\n\n    const config: any = assignDefined(\n      this._state,\n      {\n        show: this.show,\n        name: this.trigger,\n        orient: this.orient,\n        itemSize: this.itemSize,\n        itemGap: this.itemGap,\n        showTitle: this.showTitle,\n        label: this.label,\n        feature: this.feature,\n        iconStyle: this.iconStyle,\n        zlevel: this.zlevel,\n        z: this.z,\n        transitionDuration: this.transitionDuration,\n        left: this.left,\n        top: this.top,\n        right: this.right,\n        bottom: this.bottom,\n        width: this.width,\n        height: this.height,\n      },\n      this.config ? this.config : {},\n    );\n    // set toolbox configuration in parent chart and render new configurations\n    this._optionsService.setOption('toolbox', config);\n  }\n\n  private _removeOption(): void {\n    this._optionsService.clearOption('toolbox');\n  }\n\n  private _checkFormatterTemplate(): void {\n    if (this.formatterTemplate) {\n      this.feature = {\n        ...this.feature,\n        dataView: {\n          ...this.feature.dataView,\n          optionToContent: this._optionToContentFormatter(),\n        },\n      };\n    }\n  }\n\n  private _optionToContentFormatter(): () => string {\n    return () => {\n      this._changeDetectorRef.markForCheck();\n      return (<HTMLElement>this._elementRef.nativeElement).innerHTML;\n    };\n  }\n}\n","import { NgModule, Type } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport 'echarts/lib/component/toolbox';\n\nimport { TdChartToolboxComponent, TdChartViewDataFormatterDirective } from './toolbox.component';\n\nexport const TOOLBOX_MODULE_COMPONENTS: Type<any>[] = [TdChartToolboxComponent, TdChartViewDataFormatterDirective];\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [TOOLBOX_MODULE_COMPONENTS],\n  exports: [TOOLBOX_MODULE_COMPONENTS],\n})\nexport class CovalentToolboxEchartsModule {}\n"],"names":["Directive","assignDefined","Component","ChangeDetectionStrategy","ChangeDetectorRef","ElementRef","TdChartOptionsService","Input","ContentChild","TemplateRef","ViewChild","NgModule","CommonModule"],"mappings":"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"}