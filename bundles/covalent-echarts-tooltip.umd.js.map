{"version":3,"file":"covalent-echarts-tooltip.umd.js","sources":["../../../../src/platform/echarts/tooltip/tooltip.component.ts","../../../../src/platform/echarts/tooltip/series-tooltip.component.ts","../../../../src/platform/echarts/tooltip/tooltip.module.ts"],"sourcesContent":["import {\n  Component,\n  Input,\n  Directive,\n  TemplateRef,\n  ChangeDetectionStrategy,\n  ElementRef,\n  ChangeDetectorRef,\n  OnChanges,\n  ContentChild,\n  ViewChild,\n  OnDestroy,\n} from '@angular/core';\n\nimport {\n  TdChartOptionsService,\n  assignDefined,\n  TdTooltipTrigger,\n  TdTooltipTriggerOn,\n  TdTooltipPosition,\n} from '@covalent/echarts/base';\n\nexport class TdTooltipContext {\n  $implicit: any;\n  ticket: string;\n}\n\n@Directive({\n  selector: 'ng-template[tdTooltipFormatter]',\n})\nexport class TdChartTooltipFormatterDirective {}\n\n@Component({\n  selector: 'td-chart-tooltip',\n  templateUrl: './tooltip.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TdChartTooltipComponent implements OnChanges, OnDestroy {\n  private _state: any = {};\n\n  _context: TdTooltipContext = new TdTooltipContext();\n\n  @Input() config: any = {};\n\n  @Input() show: boolean = true;\n  @Input() trigger: TdTooltipTrigger = 'axis';\n  @Input() axisPointer: any;\n  @Input() showContent: boolean = true;\n  @Input() alwaysShowContent: boolean = false;\n  @Input() triggerOn: TdTooltipTriggerOn = 'mousemove|click';\n  @Input() showDelay: number = 0;\n  @Input() hideDelay: number = 0;\n  @Input() enterable: boolean = false;\n  @Input() renderMode: 'html' | 'richText';\n  @Input() confine: boolean = false;\n  @Input() transitionDuration: number = 0.5;\n  @Input() position: TdTooltipPosition; // series\n  @Input() formatter: string | Function; // series\n  @Input() backgroundColor: string = 'rgba(50,50,50,0.7)'; // series\n  @Input() borderColor: string = '#333'; // series\n  @Input() borderWidth: number = 0; // series\n  @Input() padding: number = 5; // series\n  @Input() textStyle: any = {\n    // series\n    color: '#FFF',\n  };\n  @Input() extraCssText: string; // series\n\n  @ContentChild(TdChartTooltipFormatterDirective, { read: TemplateRef, static: true })\n  formatterTemplate: TemplateRef<any>;\n  @ViewChild('tooltipContent', { static: true }) fullTemplate: TemplateRef<any>;\n\n  constructor(\n    private _changeDetectorRef: ChangeDetectorRef,\n    private _elementRef: ElementRef,\n    private _optionsService: TdChartOptionsService,\n  ) {}\n\n  ngOnChanges(): void {\n    this._setOptions();\n  }\n\n  ngOnDestroy(): void {\n    this._removeOption();\n  }\n\n  private _setOptions(): void {\n    const config: any = assignDefined(\n      this._state,\n      {\n        show: this.show,\n        trigger: this.trigger,\n        axisPointer: this.axisPointer,\n        showContent: this.showContent,\n        alwaysShowContent: this.alwaysShowContent,\n        triggerOn: this.triggerOn,\n        showDelay: this.showDelay,\n        hideDelay: this.hideDelay,\n        enterable: this.enterable,\n        confine: this.confine,\n        transitionDuration: this.transitionDuration,\n        position: this.position,\n        formatter: this.formatter ? this.formatter : this.formatterTemplate ? this._formatter() : undefined,\n        backgroundColor: this.backgroundColor,\n        borderColor: this.borderColor,\n        borderWidth: this.borderWidth,\n        padding: this.padding,\n        textStyle: this.textStyle,\n        extraCssText: this.extraCssText,\n      },\n      this.config ? this.config : {},\n    );\n    // set tooltip configuration in parent chart and render new configurations\n    this._optionsService.setOption('tooltip', config);\n  }\n\n  private _removeOption(): void {\n    this._optionsService.clearOption('tooltip');\n  }\n\n  private _formatter(): (params: any, ticket: any, callback: (ticket: string, html: string) => void) => string {\n    return (params: any, ticket: any, callback: (ticket: string, html: string) => void) => {\n      this._context = {\n        $implicit: params,\n        ticket,\n      };\n      // timeout set since we need to set the HTML at the end of the angular lifecycle when\n      // the tooltip delay is more than 0\n      setTimeout(() => {\n        callback(ticket, (<HTMLElement>this._elementRef.nativeElement).innerHTML);\n      });\n      this._changeDetectorRef.markForCheck();\n      return (<HTMLElement>this._elementRef.nativeElement).innerHTML;\n    };\n  }\n}\n","import {\n  Component,\n  Input,\n  ContentChild,\n  ViewChild,\n  TemplateRef,\n  ChangeDetectorRef,\n  ElementRef,\n  ChangeDetectionStrategy,\n  OnChanges,\n  OnDestroy,\n} from '@angular/core';\n\nimport { assignDefined, TdSeriesDirective } from '@covalent/echarts/base';\n\nimport { TdChartTooltipFormatterDirective, TdTooltipContext } from './tooltip.component';\n\n@Component({\n  selector: 'td-chart-series-tooltip',\n  templateUrl: './tooltip.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TdSeriesTooltipComponent implements OnChanges, OnDestroy {\n  private _state: any = {};\n\n  _context: TdTooltipContext = new TdTooltipContext();\n\n  @Input() config: any;\n\n  @Input() formatter: any;\n  // Parent tooltip trigger must be set to 'item' to render these properties\n  @Input() position: string | string[] | number[];\n  @Input() backgroundColor: string = 'rgba(50,50,50,0.7)';\n  @Input() borderColor: string = '#333';\n  @Input() borderWidth: number = 0;\n  @Input() padding: number = 5;\n  @Input() textStyle: any = {\n    color: '#FFF',\n  };\n  @Input() extraCssText: string;\n\n  @ContentChild(TdChartTooltipFormatterDirective, { read: TemplateRef, static: true })\n  formatterTemplate: TemplateRef<any>;\n  @ViewChild('tooltipContent', { static: true }) fullTemplate: TemplateRef<any>;\n\n  constructor(\n    private _changeDetectorRef: ChangeDetectorRef,\n    private _elementRef: ElementRef,\n    private _seriesComponent: TdSeriesDirective,\n  ) {}\n\n  ngOnChanges(): void {\n    this._setOptions();\n  }\n\n  ngOnDestroy(): void {\n    this._removeOption();\n  }\n\n  private _setOptions(): void {\n    const config: any = assignDefined(\n      this._state,\n      {\n        position: this.position,\n        backgroundColor: this.backgroundColor,\n        borderColor: this.borderColor,\n        borderWidth: this.borderWidth,\n        padding: this.padding,\n        textStyle: this.textStyle,\n        extraCssText: this.extraCssText,\n        formatter: this.formatter ? this.formatter : this.formatterTemplate ? this._formatter() : undefined,\n      },\n      this.config ? this.config : {},\n    );\n    // set series tooltip configuration in parent chart and render new configurations\n    this._seriesComponent.setStateOption('tooltip', config);\n  }\n\n  /**\n   * Formatter for tooltip\n   *\n   */\n  private _formatter(): (params: any, ticket: any, callback: (ticket: string, html: string) => void) => string {\n    return (params: any, ticket: any, callback: (ticket: string, html: string) => void) => {\n      this._context = {\n        $implicit: params,\n        ticket,\n      };\n      // timeout set since we need to set the HTML at the end of the angular lifecycle when\n      // the tooltip delay is more than 0\n      setTimeout(() => {\n        callback(ticket, (<HTMLElement>this._elementRef.nativeElement).innerHTML);\n      });\n      this._changeDetectorRef.markForCheck();\n      return (<HTMLElement>this._elementRef.nativeElement).innerHTML;\n    };\n  }\n\n  private _removeOption(): void {\n    this._seriesComponent.removeStateOption('tooltip');\n  }\n}\n","import { NgModule, Type } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport 'echarts/lib/component/tooltip';\n\nimport { TdChartTooltipComponent, TdChartTooltipFormatterDirective } from './tooltip.component';\nimport { TdSeriesTooltipComponent } from './series-tooltip.component';\n\nexport const TOOLTIP_MODULE_COMPONENTS: Type<any>[] = [\n  TdChartTooltipComponent,\n  TdChartTooltipFormatterDirective,\n  TdSeriesTooltipComponent,\n];\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [TOOLTIP_MODULE_COMPONENTS],\n  exports: [TOOLTIP_MODULE_COMPONENTS],\n})\nexport class CovalentTooltipEchartsModule {}\n"],"names":["Directive","assignDefined","Component","ChangeDetectionStrategy","ChangeDetectorRef","ElementRef","TdChartOptionsService","Input","ContentChild","TemplateRef","ViewChild","TdSeriesDirective","NgModule","CommonModule"],"mappings":"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"}