!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/common"),require("rxjs/operators"),require("echarts/lib/echarts"),require("rxjs"),require("zrender/lib/svg/svg"),require("@angular/core")):"function"==typeof define&&define.amd?define("@covalent/echarts/base",["exports","@angular/common","rxjs/operators","echarts/lib/echarts","rxjs","zrender/lib/svg/svg","@angular/core"],e):e((t.covalent=t.covalent||{},t.covalent.echarts=t.covalent.echarts||{},t.covalent.echarts.base={}),t.ng.common,t.rxjs.operators,t.echarts,t.rxjs,null,t.ng.core)}(this,function(t,e,n,i,o,a,s){"use strict";var r=(p.prototype.setOption=function(t,e){var n={};n[t]=e,Object.assign(this._options,n),this._optionsSubject.next(this._options)},p.prototype.setArrayOption=function(t,e){var n=this.getOption(t);if(n){var i=n.indexOf(e);-1<i?n[i]=e:n.push(e)}else n=[e];this.setOption(t,n)},p.prototype.removeArrayOption=function(t,e){var n=this.getOption(t);if(n){var i=n.indexOf(e);-1<i?n[i]=null:n=[]}this.setOption(t,n)},p.prototype.getOption=function(t){return this._options[t]},p.prototype.clearOption=function(t){this.setOption(t,null)},p.prototype.listen=function(){return this._optionsSubject.asObservable()},p.decorators=[{type:s.Injectable}],p);function p(){this._options={},this._optionsSubject=new o.BehaviorSubject(this._options)}function c(t){return t||new r}var h={provide:r,deps:[[new s.Optional,new s.SkipSelf,r]],useFactory:c},u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function l(t,e){function n(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function O(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function g(t){for(var e,n,i,o,a,s,r=[],p=1;p<arguments.length;p++)r[p-1]=arguments[p];var c=new Set;try{for(var h=O(r),u=h.next();!u.done;u=h.next()){var l=u.value;try{for(var g=O(Object.keys(l)),y=g.next();!y.done;y=g.next()){var m=y.value;c.add(m);var d=l[m];d!==undefined&&null!==d?t[m]=d:null===d&&delete t[m]}}catch(v){i={error:v}}finally{try{y&&!y.done&&(o=g["return"])&&o.call(g)}finally{if(i)throw i.error}}}}catch(b){e={error:b}}finally{try{u&&!u.done&&(n=h["return"])&&n.call(h)}finally{if(e)throw e.error}}try{for(var f=O(Object.keys(t)),_=f.next();!_.done;_=f.next()){m=_.value;c.has(m)||delete t[m]}}catch(x){a={error:x}}finally{try{_&&!_.done&&(s=f["return"])&&s.call(f)}finally{if(a)throw a.error}}return t}var y=(Object.defineProperty(m.prototype,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),m.prototype.ngAfterViewInit=function(){this._initializeChart()},m.prototype.ngOnChanges=function(t){this._instance&&(t.renderer||t.themeName||t.group?(this._disposeChart(),this._initializeChart()):this.render())},m.prototype.ngOnDestroy=function(){this._disposeChart(),this._destroy.unsubscribe()},m.prototype.render=function(){this._instance&&(this._instance.setOption(g(this._state,{grid:{show:!0,left:"20",right:"20",bottom:this.config.toolbox&&"number"==typeof this.config.toolbox.bottom||this._options.toolbox&&"number"==typeof this._options.toolbox.bottom?"40":"10",top:this.config.toolbox&&"number"==typeof this.config.toolbox.top||this._options.toolbox&&"number"==typeof this._options.toolbox.top?"40":"10",containLabel:!0,borderColor:"#FCFCFC"}},this._options,this.config?this.config:{}),!0),this._changeDetectorRef.markForCheck())},m.prototype._initializeChart=function(){var e=this;this._instance=i.init(this._elementRef.nativeElement,this.themeName,{renderer:this.renderer}),o.fromEvent(this._instance,"click").pipe(n.takeUntil(this._destroy)).subscribe(function(t){e.chartClick.next(t)}),o.fromEvent(this._instance,"dblclick").pipe(n.takeUntil(this._destroy)).subscribe(function(t){e.chartDblclick.next(t)}),o.fromEvent(this._instance,"contextmenu").pipe(n.takeUntil(this._destroy)).subscribe(function(t){e.chartContextmenu.next(t)}),o.fromEvent(this._instance,"magictypechanged").pipe(n.takeUntil(this._destroy)).subscribe(function(t){e.magicTypeChanged.next(t)}),o.fromEvent(this._instance,"dataviewchanged").pipe(n.takeUntil(this._destroy)).subscribe(function(t){e.dataViewChanged.next(t)}),o.fromEvent(this._instance,"datazoom").pipe(n.takeUntil(this._destroy)).subscribe(function(t){e.datazoom.next(t)}),o.fromEvent(this._instance,"restore").pipe(n.takeUntil(this._destroy)).subscribe(function(t){e.restore.next(t)}),this.group&&(this._instance.group=this.group,i.connect(this.group),this._changeDetectorRef.markForCheck()),o.merge(o.fromEvent(window,"resize").pipe(n.debounceTime(100)),this._widthSubject.asObservable().pipe(n.distinctUntilChanged()),this._heightSubject.asObservable().pipe(n.distinctUntilChanged())).pipe(n.takeUntil(this._destroy),n.debounceTime(100)).subscribe(function(){e._instance&&(e._instance.resize(),e._changeDetectorRef.markForCheck())}),this._optionsService.listen().pipe(n.tap(function(t){g(e._options,t)}),n.debounceTime(0),n.takeUntil(this._destroy)).subscribe(function(){e.render()}),o.timer(500,250).pipe(n.takeUntil(this._destroy)).subscribe(function(){e._elementRef&&e._elementRef.nativeElement&&(e._widthSubject.next(e._elementRef.nativeElement.getBoundingClientRect().width),e._heightSubject.next(e._elementRef.nativeElement.getBoundingClientRect().height))})},m.prototype._disposeChart=function(){this._instance&&(this._instance.clear(),i.dispose(this._instance)),this._destroy.next(!0)},m.decorators=[{type:s.Component,args:[{selector:"td-chart",template:"",changeDetection:s.ChangeDetectionStrategy.OnPush,providers:[h],styles:[":host{display:block;width:100%}"]}]}],m.ctorParameters=function(){return[{type:s.ChangeDetectorRef},{type:s.ElementRef},{type:r}]},m.propDecorators={config:[{type:s.Input,args:["config"]}],group:[{type:s.Input,args:["group"]}],themeName:[{type:s.Input,args:["themeName"]}],renderer:[{type:s.Input,args:["renderer"]}],chartClick:[{type:s.Output,args:["chartClick"]}],chartDblclick:[{type:s.Output,args:["chartDblclick"]}],chartContextmenu:[{type:s.Output,args:["chartContextmenu"]}],magicTypeChanged:[{type:s.Output,args:["magicTypeChanged"]}],dataViewChanged:[{type:s.Output,args:["dataViewChanged"]}],datazoom:[{type:s.Output,args:["datazoom"]}],restore:[{type:s.Output,args:["restore"]}]},m);function m(t,e,n){this._changeDetectorRef=t,this._elementRef=e,this._optionsService=n,this._destroy=new o.Subject,this._widthSubject=new o.Subject,this._heightSubject=new o.Subject,this._state={},this._options={},this.config={},this.renderer="canvas",this.chartClick=new s.EventEmitter,this.chartDblclick=new s.EventEmitter,this.chartContextmenu=new s.EventEmitter,this.magicTypeChanged=new s.EventEmitter,this.dataViewChanged=new s.EventEmitter,this.datazoom=new s.EventEmitter,this.restore=new s.EventEmitter}var d=(f.prototype.ngOnInit=function(){this._setOptions()},f.prototype.ngOnChanges=function(){this._setOptions()},f.prototype.ngOnDestroy=function(){this._removeOption()},f.prototype._setOptions=function(){var t=g(this._state,{id:this.id,show:this.show,gridIndex:this.gridIndex,position:this.position,offset:this.offset,type:this.type,name:this.name,nameLocation:this.nameLocation,nameTextStyle:this.nameTextStyle,nameGap:this.nameGap,nameRotate:this.nameRotate,inverse:this.inverse,boundaryGap:this.boundaryGap,min:this.min,max:this.max,scale:this.scale,minInterval:this.minInterval,interval:this.interval,logBase:this.logBase,silent:this.silent,triggerEvent:this.triggerEvent,axisLine:this.axisLine,axisTick:this.axisTick,axisLabel:this.axisLabel,splitLine:this.splitLine,splitArea:this.splitArea,data:this.data,axisPointer:this.axisPointer,zlevel:this.zlevel,z:this.z},this.config?this.config:{});this._optionsService.setArrayOption(this._axisOption,t)},f.prototype._removeOption=function(){this._optionsService.clearOption(this._axisOption)},f.propDecorators={config:[{type:s.Input,args:["config"]}],id:[{type:s.Input,args:["id"]}],show:[{type:s.Input,args:["show"]}],gridIndex:[{type:s.Input,args:["gridIndex"]}],offset:[{type:s.Input,args:["offset"]}],type:[{type:s.Input,args:["type"]}],name:[{type:s.Input,args:["name"]}],nameLocation:[{type:s.Input,args:["nameLocation"]}],nameTextStyle:[{type:s.Input,args:["nameTextStyle"]}],nameGap:[{type:s.Input,args:["nameGap"]}],nameRotate:[{type:s.Input,args:["nameRotate"]}],inverse:[{type:s.Input,args:["inverse"]}],boundaryGap:[{type:s.Input,args:["boundaryGap"]}],min:[{type:s.Input,args:["min"]}],max:[{type:s.Input,args:["max"]}],scale:[{type:s.Input,args:["scale"]}],minInterval:[{type:s.Input,args:["minInterval"]}],interval:[{type:s.Input,args:["interval"]}],logBase:[{type:s.Input,args:["logBase"]}],silent:[{type:s.Input,args:["silent"]}],triggerEvent:[{type:s.Input,args:["triggerEvent"]}],axisLine:[{type:s.Input,args:["axisLine"]}],axisTick:[{type:s.Input,args:["axisTick"]}],axisLabel:[{type:s.Input,args:["axisLabel"]}],splitLine:[{type:s.Input,args:["splitLine"]}],splitArea:[{type:s.Input,args:["splitArea"]}],data:[{type:s.Input,args:["data"]}],axisPointer:[{type:s.Input,args:["axisPointer"]}],zlevel:[{type:s.Input,args:["zlevel"]}],z:[{type:s.Input,args:["z"]}]},f);function f(t,e){this._axisOption=t,this._optionsService=e,this._state={axisLine:{lineStyle:{color:"#ABABAB"}},splitLine:{lineStyle:{color:"#ABABAB"}}},this.config={},this.show=!0}var _,v=(l(b,_=d),b.decorators=[{type:s.Component,args:[{selector:"td-chart-x-axis",template:"",changeDetection:s.ChangeDetectionStrategy.OnPush}]}],b.ctorParameters=function(){return[{type:r}]},b.propDecorators={position:[{type:s.Input,args:["position"]}]},b);function b(t){return _.call(this,"xAxis",t)||this}var x,I=(l(C,x=d),C.decorators=[{type:s.Component,args:[{selector:"td-chart-y-axis",template:"",changeDetection:s.ChangeDetectionStrategy.OnPush}]}],C.ctorParameters=function(){return[{type:r}]},C.propDecorators={position:[{type:s.Input,args:["position"]}]},C);function C(t){return x.call(this,"yAxis",t)||this}var E=[y,v,I],D=(S.decorators=[{type:s.NgModule,args:[{imports:[e.CommonModule],declarations:[E],exports:[E]}]}],S);function S(){}var w=(Object.defineProperty(k.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),k.prototype.ngOnInit=function(){this._setOptions()},k.prototype.ngOnChanges=function(){this._setOptions()},k.prototype.ngOnDestroy=function(){this._removeOption()},k.prototype.setStateOption=function(t,e){this._options[t]=e,this._setOptions()},k.prototype.removeStateOption=function(t){this._options[t]=null,this._setOptions()},k.prototype._setOptions=function(){var t=g(this._state,{id:this.id,type:this.type,name:this.name,color:this.color,data:this.data,animation:this.animation,animationThreshold:this.animationThreshold,animationDuration:this.animationDuration,animationEasing:this.animationEasing,animationDelay:this.animationDelay,animationDurationUpdate:this.animationDurationUpdate,animationEasingUpdate:this.animationEasingUpdate,animationDelayUpdate:this.animationDelayUpdate,tooltip:this.tooltip},this.getConfig(),this._options,this.config?this.config:{});this.optionsService.setArrayOption("series",t)},k.prototype._removeOption=function(){this.optionsService.removeArrayOption("series",this._state)},k.propDecorators={config:[{type:s.Input,args:["config"]}],id:[{type:s.Input,args:["id"]}],name:[{type:s.Input,args:["name"]}],color:[{type:s.Input,args:["color"]}],data:[{type:s.Input,args:["data"]}],animation:[{type:s.Input,args:["animation"]}],animationThreshold:[{type:s.Input,args:["animationThreshold"]}],animationDuration:[{type:s.Input,args:["animationDuration"]}],animationEasing:[{type:s.Input,args:["animationEasing"]}],animationDelay:[{type:s.Input,args:["animationDelay"]}],animationDurationUpdate:[{type:s.Input,args:["animationDurationUpdate"]}],animationEasingUpdate:[{type:s.Input,args:["animationEasingUpdate"]}],animationDelayUpdate:[{type:s.Input,args:["animationDelayUpdate"]}],tooltip:[{type:s.Input,args:["tooltip"]}]},k);function k(t,e){this.optionsService=e,this._state={},this._options={},this.config={},this._type=t}t.TdChartComponent=y,t.TdChartAxisComponent=d,t.TdChartYAxisComponent=I,t.TdChartXAxisComponent=v,t.TdChartOptionsService=r,t.CHART_PROVIDER=h,t.BASE_MODULE_COMPONENTS=E,t.CovalentBaseEchartsModule=D,t.assignDefined=g,t.TdSeriesComponent=w,t.ɵa=c,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=covalent-echarts-base.umd.min.js.map