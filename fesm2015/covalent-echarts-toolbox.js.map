{"version":3,"file":"covalent-echarts-toolbox.js","sources":["../../../../src/platform/echarts/toolbox/toolbox.component.ts","../../../../src/platform/echarts/toolbox/toolbox.module.ts"],"sourcesContent":["import {\n  Component,\n  Input,\n  Directive,\n  TemplateRef,\n  ChangeDetectionStrategy,\n  ElementRef,\n  ChangeDetectorRef,\n  OnChanges,\n  ContentChild,\n  ViewChild,\n  OnDestroy,\n} from '@angular/core';\n\nimport {\n  TdChartOptionsService,\n  assignDefined,\n  ITdLabel,\n  ITdShadow,\n  ITdItemStyle,\n  TdTextPosition,\n  TdTextAlign,\n} from '@covalent/echarts/base';\n\nexport type TdToolboxOrient = 'horizontal' | 'vertical';\nexport type TdImageType = 'png' | 'jpeg';\n\nexport interface ITdAcceptedBrushTypes {\n  rect?: string;\n  polygon?: string;\n  lineX?: string;\n  lineY?: string;\n  keep?: string;\n  clear?: string;\n}\n\nexport interface ITdAcceptedMagicTypes {\n  line?: string;\n  bar?: string;\n  stack?: string;\n  tiled?: string;\n}\n\nexport interface ITdToolboxIconEmphasis extends ITdItemStyle, ITdShadow {}\n\nexport interface ITdFeatureIconStyle extends ITdItemStyle, ITdShadow {\n  textPosition?: TdTextPosition;\n  textAlign?: TdTextAlign;\n  emphasis?: ITdToolboxIconEmphasis;\n}\n\nexport interface ITdZoomTitles {\n  zoom?: string;\n  back?: string;\n}\n\nexport interface ITdSaveAsImage {\n  type?: TdImageType;\n  name?: string;\n  backgroundColor?: any;\n  excludeComponents?: string[]; // defaults to ['toolbox']\n  show?: boolean;\n  title?: string;\n  icon?: string;\n  iconStyle?: ITdFeatureIconStyle;\n  pixelRatio?: number;\n}\n\nexport interface ITdRestore {\n  show?: boolean;\n  title?: string;\n  icon?: string;\n  iconStyle?: ITdFeatureIconStyle;\n}\n\nexport interface ITdDataView {\n  show?: boolean;\n  title?: string;\n  icon?: string;\n  iconStyle?: ITdFeatureIconStyle;\n  readOnly?: boolean;\n  optionToContent?: Function;\n  contentToOption?: Function;\n  lang?: string[]; // Defaults to Chinese, there are 3 names in data view, which are ['data view', 'turn off' and 'refresh'].\n  textareaColor?: string;\n  textareaBorderColor?: string;\n  textColor?: string;\n  buttonColor?: string;\n  buttonTextColor?: string;\n}\n\nexport interface ITdDataZoom {\n  show?: boolean;\n  title?: ITdZoomTitles;\n  icon?: ITdZoomTitles;\n  iconStyle?: ITdFeatureIconStyle;\n  xAxisIndex?: number | number[] | boolean;\n  yAxisIndex?: number | number[] | boolean;\n}\n\nexport interface ITdMagicType {\n  show?: boolean;\n  type?: string[]; // only expects 'line' | 'bar' | 'stack' | 'tiled';\n  title?: ITdAcceptedMagicTypes;\n  icon?: ITdAcceptedMagicTypes;\n  iconStyle?: ITdFeatureIconStyle;\n  option?: {\n    line?: object;\n    bar?: object;\n    stack?: object;\n    tiled?: object;\n  };\n  seriesIndex?: {\n    line?: any[];\n    bar?: any[];\n    stack?: any[];\n    tiled?: any[];\n  };\n}\n\nexport interface ITdBrush {\n  type?: any[];\n  icon?: ITdAcceptedBrushTypes;\n  title?: ITdAcceptedBrushTypes;\n}\n\nexport interface ITdToolboxFeature {\n  saveAsImage?: ITdSaveAsImage;\n  restore?: ITdRestore;\n  dataView?: ITdDataView;\n  dataZoom?: ITdDataZoom;\n  magicType?: ITdMagicType;\n  brush?: ITdBrush;\n}\n\n@Directive({\n  selector: 'ng-template[tdViewDataFormatter]',\n})\nexport class TdChartViewDataFormatterDirective {}\n\n@Component({\n  selector: 'td-chart-toolbox',\n  templateUrl: './toolbox.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TdChartToolboxComponent implements OnChanges, OnDestroy {\n  private _state: any = {};\n\n  @Input() config: any = {};\n\n  @Input() show: boolean = true;\n  @Input() trigger: string;\n  @Input() orient: TdToolboxOrient;\n  @Input() itemSize: number;\n  @Input() itemGap: number;\n  @Input() showTitle: boolean = true;\n  @Input() label: ITdLabel;\n  @Input() feature: ITdToolboxFeature;\n  @Input() iconStyle: ITdFeatureIconStyle;\n  @Input() zlevel: number;\n  @Input() z: number;\n  @Input() transitionDuration: number = 0.5;\n  @Input() left: string | number = 'auto';\n  @Input() top: string | number = 'auto';\n  @Input() right: string | number = 'auto';\n  @Input() bottom: string | number = 'auto';\n  @Input() width: string | number = 'auto';\n  @Input() height: string | number = 'auto';\n\n  @ContentChild(TdChartViewDataFormatterDirective, { read: TemplateRef })\n  formatterTemplate: TemplateRef<any>;\n  @ViewChild('toolboxContent', { static: true }) fullTemplate: TemplateRef<any>;\n\n  constructor(\n    private _changeDetectorRef: ChangeDetectorRef,\n    private _elementRef: ElementRef,\n    private _optionsService: TdChartOptionsService,\n  ) {}\n\n  ngOnChanges(): void {\n    this._setOptions();\n  }\n\n  ngOnDestroy(): void {\n    this._removeOption();\n  }\n\n  private _setOptions(): void {\n    this._checkFormatterTemplate();\n\n    const config: any = assignDefined(\n      this._state,\n      {\n        show: this.show,\n        name: this.trigger,\n        orient: this.orient,\n        itemSize: this.itemSize,\n        itemGap: this.itemGap,\n        showTitle: this.showTitle,\n        label: this.label,\n        feature: this.feature,\n        iconStyle: this.iconStyle,\n        zlevel: this.zlevel,\n        z: this.z,\n        transitionDuration: this.transitionDuration,\n        left: this.left,\n        top: this.top,\n        right: this.right,\n        bottom: this.bottom,\n        width: this.width,\n        height: this.height,\n      },\n      this.config ? this.config : {},\n    );\n    // set toolbox configuration in parent chart and render new configurations\n    this._optionsService.setOption('toolbox', config);\n  }\n\n  private _removeOption(): void {\n    this._optionsService.clearOption('toolbox');\n  }\n\n  private _checkFormatterTemplate(): void {\n    if (this.formatterTemplate) {\n      this.feature = {\n        ...this.feature,\n        dataView: {\n          ...this.feature.dataView,\n          optionToContent: this._optionToContentFormatter(),\n        },\n      };\n    }\n  }\n\n  private _optionToContentFormatter(): () => string {\n    return () => {\n      this._changeDetectorRef.markForCheck();\n      return (<HTMLElement>this._elementRef.nativeElement).innerHTML;\n    };\n  }\n}\n","import { NgModule, Type } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport 'echarts/lib/component/toolbox';\n\nimport { TdChartToolboxComponent, TdChartViewDataFormatterDirective } from './toolbox.component';\n\nexport const TOOLBOX_MODULE_COMPONENTS: Type<any>[] = [TdChartToolboxComponent, TdChartViewDataFormatterDirective];\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [TOOLBOX_MODULE_COMPONENTS],\n  exports: [TOOLBOX_MODULE_COMPONENTS],\n})\nexport class CovalentToolboxEchartsModule {}\n"],"names":[],"mappings":"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"}